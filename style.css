:root{
  --w: 69mm;
  --h: 125mm;

  --bleed: 3mm;
  --safe: 4mm;

  --ink:#000;
  --paper:#fff;
  --line:#000;

  --accent:#1f6fff;

  /* ✅ 너가 준 구조값 */
  --slotTop: 30mm;       /* 카드 상단 → 첫 가로선 */
  --windowH: 40mm;       /* 두 가로선 사이 = 보이는 창 높이 */
}

*{ box-sizing:border-box; }
html,body{ height:100%; }
body{
  margin:0;
  background:#f2f2f2;
  color:var(--ink);
  font-family:"Noto Sans KR", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
}
.mono{ font-family:"IBM Plex Mono", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace; }
.kr{ font-family:"Noto Sans KR", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; }

.topbar{
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:14px 16px;
  border-bottom:1px solid #ddd;
  background:#fff;
}
.brand{ font-weight:700; letter-spacing:.02em; }

.controls{ display:flex; gap:10px; align-items:center; flex-wrap:wrap; }
.seg{ display:flex; gap:8px; }

.btn{
  border:1px solid #111;
  background:#fff;
  padding:8px 10px;
  font:600 12px/1 "IBM Plex Mono", monospace;
  cursor:pointer;
}
.btn.active{ background:#111; color:#fff; }
.btn.primary{ background:#111; color:#fff; }

.toggle{ display:flex; gap:8px; align-items:center; font:600 12px/1 "IBM Plex Mono", monospace; }
.toggle input{ transform: translateY(1px); }

.stage{ padding:24px; display:flex; justify-content:center; }
.paper{
  position:relative;
  width: calc(var(--w) + var(--bleed)*2);
  height: calc(var(--h) + var(--bleed)*2);
}

.card{
  position:absolute;
  inset:0;
  background:var(--paper);
  box-shadow:0 16px 40px rgba(0,0,0,.15);
  border:1px solid #333;
}
.face{ display:none; }
.face.is-active{ display:block; }

.trim{
  position:absolute;
  inset: var(--bleed);
  outline:1px solid rgba(0,0,0,.25);
}
.safe{
  position:absolute;
  inset: var(--safe);
  outline:1px solid rgba(0,0,0,.15);
  padding: 7mm 6mm;
  display:flex;
  flex-direction:column;
  gap:6mm;
}

.box{
  border:1px solid var(--line);
  padding: 2.6mm 3mm;
  background:#fff;
}

.top-title{ align-self:center; padding: 2.2mm 4mm; }
.title-1{ font-size:18px; letter-spacing:.08em; }

.product{ align-self:center; text-align:center; width: 52mm; }
.product-no{ font-size:30px; letter-spacing:.06em; }
.product-name{ font-size:18px; letter-spacing:.18em; margin-top:1.5mm; }

.desc{ align-self:center; width: 58mm; text-align:center; padding:2.4mm 3mm; }
.desc-line{ font-size:13px; font-weight:700; letter-spacing:.02em; }

.window-frame{
  position:relative;
  width:100%;
  /* 카드 상단에서 slotTop까지 거리 반영을 "가이드"로 잡고
     실제 레이아웃은 safe padding 영향이 있어, 아래 art-wrap에서 창을 정확히 구현 */
}
.window-note{
  font-size:10px;
  opacity:.7;
  letter-spacing:.08em;
  margin-bottom:2mm;
}

/* ✅ 핵심: 창 높이(40mm)만 보이도록 */
.art-wrap{
  height: var(--windowH);
  overflow:hidden;
  border:1px solid rgba(0,0,0,.25);
  display:flex;
  align-items:center;
  justify-content:center;
  background:#fff;
}

/* 아트는 창보다 크게(위아래가 잘리면서 "창에 걸린 느낌") */
.art{
  width: 62mm;
  height:auto;
  transform: translateY(var(--artOffset, 0mm));
}

.const-lines path{
  fill:none;
  stroke:#000;
  stroke-width:1.3;
  stroke-dasharray:2.2 3;
  opacity:.9;
}
.const-dots circle{
  fill:var(--accent);
  stroke:#000;
  stroke-width:2;
}
.const-dots .dot-main{ r:11; }
.stars .star{
  fill:none;
  stroke:var(--accent);
  stroke-width:3;
  stroke-linecap:round;
}
.stars .small{ stroke-width:2.4; }
.stars .big{ stroke-width:3.6; }

.info{ display:flex; flex-direction:column; gap:4mm; margin-top:2mm; }
.row{ display:grid; grid-template-columns: 22mm 1fr; gap:4mm; align-items:center; }
.label{ font-size:14px; letter-spacing:.06em; }
.value{ font-size:14px; font-weight:700; }

.roasting .label{ padding-top:2mm; padding-bottom:2mm; }
.sub{ font-size:11px; font-weight:600; opacity:.85; margin-top:1mm; }

.roastbar{ padding:3mm 3mm; }
.roast-scale{ display:flex; justify-content:space-between; font-size:11px; opacity:.9; margin-bottom:2mm; }
.bar{ position:relative; height:3.2mm; border:1px solid #000; }
.fill{ position:absolute; inset:0 auto 0 0; width:55%; background:#111; }
.ticks{ position:absolute; inset:0; display:flex; justify-content:space-evenly; pointer-events:none; }
.ticks span{ width:1px; background:#000; opacity:.9; }

/* GUIDES */
.guides{ position:absolute; inset:0; pointer-events:none; }
.g-line{
  position:absolute;
  left:0; right:0;
  height:0;
  border-top:1px dashed rgba(255,0,0,.75);
}
.g-tag{
  position:absolute;
  right:0;
  top:-14px;
  background:rgba(255,255,255,.85);
  border:1px solid rgba(255,0,0,.6);
  padding:2px 6px;
  font-size:10px;
  letter-spacing:.06em;
}

/* 슬롯 위치: safe 영역 기준으로 계산
   safe padding(7mm 6mm) 때문에 정확한 "카드 상단 기준"과는 조금 다를 수 있음.
   그래서 'slotTop' 가이드는 "카드 상단 기준"으로 trim 내부에서 잡기 위해
   trim에 대한 가이드 오버레이도 추가할 수 있는데,
   현재는 작업 편의상 safe 내부에서 시각적으로 맞추는 방식.
*/
.slot1{ top: calc(7mm + var(--slotTop)); }
.slot2{ top: calc(7mm + var(--slotTop) + var(--windowH)); }
.center{ top: calc(7mm + var(--slotTop) + (var(--windowH) / 2)); border-top:1px solid rgba(0,140,255,.7); }
.center .g-tag{ border-color:rgba(0,140,255,.7); }

/* BACK */
.back-layout{
  padding: 7mm 6mm;
  gap:6mm;
}
.back-head{ display:flex; flex-direction:column; gap:2mm; }
.back-title{ font-size:16px; letter-spacing:.08em; font-weight:700; }
.back-sub{ font-size:12px; font-weight:700; opacity:.9; }

.back-desc p{ margin:0 0 3mm 0; font-size:12px; line-height:1.55; font-weight:600; }
.back-desc .subtle{ opacity:.8; font-weight:500; }

.qr-area{ display:grid; grid-template-columns:1fr 1fr; gap:4mm; }
.qr-card{ display:flex; flex-direction:column; gap:2mm; align-items:center; text-align:center; padding:3mm 2mm; }
.qr-label{ font-size:11px; letter-spacing:.08em; }
.qr{ width:26mm; height:26mm; display:flex; align-items:center; justify-content:center; }
.qr-caption{ font-size:12px; font-weight:700; }

.back-foot{ margin-top:auto; font-size:11px; opacity:.9; text-align:center; letter-spacing:.06em; }

/* SIMULATION */
.sim-wrap{
  position:absolute;
  inset: var(--bleed);
  display:flex;
  flex-direction:column;
  gap:10px;
  padding: 10px;
  background:#fafafa;
}
.sleeve{
  position:absolute;
  inset: 10px;
  border:2px solid #111;
  background:rgba(255,255,255,.8);
}
.sleeve-header{
  position:absolute;
  top:8px; left:10px;
  font-size:12px;
  letter-spacing:.08em;
}
.sleev
